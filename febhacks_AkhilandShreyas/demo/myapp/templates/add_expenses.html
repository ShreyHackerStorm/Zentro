{% extends 'base.html' %}

{% block title %}PiggyBank - Add Expenses{% endblock %}

{% block content %}
<h2>Add Daily Expenses</h2>
<div class="stats">
    <div class="stat-card allowance-card">
        <h3>Weekly Allowance</h3>
        <p>${{ allowance.amount|default:"0.00" }}</p>
    </div>
    <div class="stat-card spent-card">
        <h3>Already Spent</h3>
        <p>${{ total_spent|default:"0.00" }}</p>
    </div>
    <div class="stat-card savings-card">
        <h3>Left to Spend</h3>
        <p>${{ savings|default:"0.00" }}</p>
    </div>
</div>

<div class="card">
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_amount">Amount ($):</label>
            <input type="number" name="amount" id="id_amount" min="0" step="0.01" required value="{{ form.amount.value|default:'' }}">
        </div>
        
        <div class="form-group">
            <label for="id_category">Category:</label>
            <select name="category" id="id_category" required>
                <option value="">Select a category</option>
                <option value="food" {% if form.category.value == 'food' %}selected{% endif %}>Food & Snacks</option>
                <option value="toys" {% if form.category.value == 'toys' %}selected{% endif %}>Toys & Games</option>
                <option value="clothes" {% if form.category.value == 'clothes' %}selected{% endif %}>Clothes</option>
                <option value="other" {% if form.category.value == 'other' %}selected{% endif %}>Other</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="id_day">Day:</label>
            <select name="day" id="id_day" required>
                <option value="">Select a day</option>
                <option value="monday" {% if form.day.value == 'monday' %}selected{% endif %}>Monday</option>
                <option value="tuesday" {% if form.day.value == 'tuesday' %}selected{% endif %}>Tuesday</option>
                <option value="wednesday" {% if form.day.value == 'wednesday' %}selected{% endif %}>Wednesday</option>
                <option value="thursday" {% if form.day.value == 'thursday' %}selected{% endif %}>Thursday</option>
                <option value="friday" {% if form.day.value == 'friday' %}selected{% endif %}>Friday</option>
                <option value="saturday" {% if form.day.value == 'saturday' %}selected{% endif %}>Saturday</option>
                <option value="sunday" {% if form.day.value == 'sunday' %}selected{% endif %}>Sunday</option>
            </select>
        </div>
        
        <button type="submit">Add Expense</button>
    </form>
</div>

{% if recent_expenses %}
<div class="card">
    <h3>Recent Expenses</h3>
    <table>
        <tr>
            <th>Day</th>
            <th>Category</th>
            <th>Amount</th>
        </tr>
        {% for expense in recent_expenses %}
        <tr>
            <td>{{ expense.day|title }}</td>
            <td>
                <span class="category-badge category-{{ expense.category }}">
                    {{ expense.category|title }}
                </span>
            </td>
            <td>${{ expense.amount }}</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endif %}
{% endblock %}